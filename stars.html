<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>example dos game</title>
  </head>
  <body>
    <canvas id="canvas" style="width: 50%; height: 50%; display: block; margin: 0 auto;">
    <script type="text/javascript" src="es6-promise.js"></script>
    <script type="text/javascript" src="browserfs.min.js"></script>
    <script type="text/javascript" src="loader.js"></script>
    <script type="text/javascript">
        // Add in the DOSBox config file separately
        var confFile = DosBoxLoader.mountFile("dosbox.conf", DosBoxLoader.fetchFile("DOSBox Config", "dosbox.conf"));
        var exe = DosBoxLoader.startExe("runstars.bat");
      
        var dbloader = new DosBoxLoader(DosBoxLoader.emulatorJS("dosbox.js"),
                                        DosBoxLoader.locateAdditionalEmulatorJS("dosbox.html.mem"),
                                        DosBoxLoader.nativeResolution(800, 600),
                                        confFile,
                                        DosBoxLoader.mountZip("c", DosBoxLoader.fetchFile("Win 3.1 + Stars!", "stars.zip")),
                                        exe);
                                    
      
        var emulator = new Emulator(document.querySelector("#canvas"),
                                    null, dbloader);

        emulator.start({ waitAfterDownloading: false });
        
        // TODO Do some extra set-up to allow adding/getting filesystem
      
    </script>
    </canvas>
    
    <br/>
    
    <script type="text/javascript">
        function tools_wipe_and_reload() {
            if(confirm("Wipe the filesystem and reload?")) {
                // The emularity uses the browsers IndexedDB with database name 'emularity'
                window.indexedDB.deleteDatabase("emularity");
                window.location.reload();
            }
        }
        
        function tools_add_file() {
            // TODO
        }
        
        function tools_get_file() {
            // TODO
        }
    </script>
    
    <div id="tools">
    <h3>Tools</h3>
    <p>
        <button type="button" onclick="tools_wipe_and_reload();">Wipe and Reload</button>
        Wipe the browser filesystem and reload the page.  This will forget the Stars! key and any saved games.
    </p>
    </div>
  </body>
</html>
